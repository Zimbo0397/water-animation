<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="css/main.css">
</head>
<body>
	<div class="inline-layout">
		<div class="water-blocks">
			<div class="water-block">
				<div class="image-holder">
					<img src="http://2.bp.blogspot.com/-bjYlfeE4l-k/UcWvfhn5KMI/AAAAAAAAEns/4dNQ_vIBLsU/s640/%D0%BA%D1%80%D0%B0%D1%81%D0%B8%D0%B2%D1%8B%D0%B5+%D1%84%D0%BE%D1%82%D0%BE+%D0%B1%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%BA7.JPG" alt="http://2.bp.blogspot.com/-bjYlfeE4l-k/UcWvfhn5KMI/AAAAAAAAEns/4dNQ_vIBLsU/s640/%D0%BA%D1%80%D0%B0%D1%81%D0%B8%D0%B2%D1%8B%D0%B5+%D1%84%D0%BE%D1%82%D0%BE+%D0%B1%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%BA7.JPG" class="fake-img">
					<div style="background-image: url(http://2.bp.blogspot.com/-bjYlfeE4l-k/UcWvfhn5KMI/AAAAAAAAEns/4dNQ_vIBLsU/s640/%D0%BA%D1%80%D0%B0%D1%81%D0%B8%D0%B2%D1%8B%D0%B5+%D1%84%D0%BE%D1%82%D0%BE+%D0%B1%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%BA7.JPG)" class="img"></div>
				</div>
			</div>
			<div class="water-block">
				<div class="image-holder">
					<img src="http://2.bp.blogspot.com/-bjYlfeE4l-k/UcWvfhn5KMI/AAAAAAAAEns/4dNQ_vIBLsU/s640/%D0%BA%D1%80%D0%B0%D1%81%D0%B8%D0%B2%D1%8B%D0%B5+%D1%84%D0%BE%D1%82%D0%BE+%D0%B1%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%BA7.JPG" alt="http://2.bp.blogspot.com/-bjYlfeE4l-k/UcWvfhn5KMI/AAAAAAAAEns/4dNQ_vIBLsU/s640/%D0%BA%D1%80%D0%B0%D1%81%D0%B8%D0%B2%D1%8B%D0%B5+%D1%84%D0%BE%D1%82%D0%BE+%D0%B1%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%BA7.JPG" class="fake-img">
					<div style="background-image: url(http://2.bp.blogspot.com/-bjYlfeE4l-k/UcWvfhn5KMI/AAAAAAAAEns/4dNQ_vIBLsU/s640/%D0%BA%D1%80%D0%B0%D1%81%D0%B8%D0%B2%D1%8B%D0%B5+%D1%84%D0%BE%D1%82%D0%BE+%D0%B1%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%BA7.JPG)" class="img"></div>
				</div>
			</div>
			<div class="water-block">
				<div class="image-holder">
					<img src="http://2.bp.blogspot.com/-bjYlfeE4l-k/UcWvfhn5KMI/AAAAAAAAEns/4dNQ_vIBLsU/s640/%D0%BA%D1%80%D0%B0%D1%81%D0%B8%D0%B2%D1%8B%D0%B5+%D1%84%D0%BE%D1%82%D0%BE+%D0%B1%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%BA7.JPG" alt="http://2.bp.blogspot.com/-bjYlfeE4l-k/UcWvfhn5KMI/AAAAAAAAEns/4dNQ_vIBLsU/s640/%D0%BA%D1%80%D0%B0%D1%81%D0%B8%D0%B2%D1%8B%D0%B5+%D1%84%D0%BE%D1%82%D0%BE+%D0%B1%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%BA7.JPG" class="fake-img">
					<div style="background-image: url(http://2.bp.blogspot.com/-bjYlfeE4l-k/UcWvfhn5KMI/AAAAAAAAEns/4dNQ_vIBLsU/s640/%D0%BA%D1%80%D0%B0%D1%81%D0%B8%D0%B2%D1%8B%D0%B5+%D1%84%D0%BE%D1%82%D0%BE+%D0%B1%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%BA7.JPG)" class="img"></div>
				</div>
			</div>
			<div class="water-block">
				<div class="image-holder">
					<img src="http://2.bp.blogspot.com/-bjYlfeE4l-k/UcWvfhn5KMI/AAAAAAAAEns/4dNQ_vIBLsU/s640/%D0%BA%D1%80%D0%B0%D1%81%D0%B8%D0%B2%D1%8B%D0%B5+%D1%84%D0%BE%D1%82%D0%BE+%D0%B1%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%BA7.JPG" alt="http://2.bp.blogspot.com/-bjYlfeE4l-k/UcWvfhn5KMI/AAAAAAAAEns/4dNQ_vIBLsU/s640/%D0%BA%D1%80%D0%B0%D1%81%D0%B8%D0%B2%D1%8B%D0%B5+%D1%84%D0%BE%D1%82%D0%BE+%D0%B1%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%BA7.JPG" class="fake-img">
					<div style="background-image: url(http://2.bp.blogspot.com/-bjYlfeE4l-k/UcWvfhn5KMI/AAAAAAAAEns/4dNQ_vIBLsU/s640/%D0%BA%D1%80%D0%B0%D1%81%D0%B8%D0%B2%D1%8B%D0%B5+%D1%84%D0%BE%D1%82%D0%BE+%D0%B1%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%BA7.JPG)" class="img"></div>
				</div>
			</div>
		</div>
	</div>
	<script
  src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous"></script>
	<script src='js/perlin.js'></script>

	<script>

	$.fn.waterBlock = function() {
		var height = 0;
		var $target = $(this);
		function drawFrame() {
		  var start = Date.now();
		  // Cache width and height values for the canvas.
		  var cWidth = 400;
		  var cHeight = 400;
		  var cValue = null;

		  // var max = -Infinity, min = Infinity;
		  var noisefn = noise.perlin3;
		  for (var x = 0; x < cWidth; x++) {
		    for (var y = 0; y < cHeight; y++) {
		      var value = noisefn(x / 50, y / 50, height);

		      // if (max < value) max = value;
		      // if (min > value) min = value;

		  		cValue = value ;

		    }
		  }
	  		console.log(cValue);
  			$target.css("transform", "translateX("+cValue+"%)  rotateY("+cValue+"deg) rotateX("+cValue+"deg)")
		 	 var end = Date.now();

		  height += 0.05
		  requestAnimationFrame(drawFrame);
		}
		requestAnimationFrame(drawFrame);
	}

$('.water-block').each(function() {
	$(this).waterBlock();
});
 // 	var height = 0;
	// var $target = $('.water-block');
	// 	function drawFrame() {
	// 	  var start = Date.now();
	// 	  // Cache width and height values for the canvas.
	// 	  var cWidth = 1000;
	// 	  var cHeight = 1000;
	// 	  var cValue = null;

	// 	  // var max = -Infinity, min = Infinity;
	// 	  var noisefn = noise.perlin3;
	// 	  for (var x = 0; x < cWidth; x++) {
	// 	    for (var y = 0; y < cHeight; y++) {
	// 	      var value = noisefn(x / 50, y / 50, height);

	// 	      // if (max < value) max = value;
	// 	      // if (min > value) min = value;

	// 	  		cValue = value * 20;

	// 	    }
	// 	  }
	//   		console.log(cValue);
 //  			$target.css("transform", "translateX("+cValue+"%) rotateY("+cValue+"deg) rotateX("+cValue+"deg) translateZ("+cValue+"px)")
	// 	 	 var end = Date.now();

	// 	  height += 0.05
	// 	  requestAnimationFrame(drawFrame);
	// 	}
	// 	requestAnimationFrame(drawFrame);
	</script>
</body>
</html>